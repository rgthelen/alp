{"kind":"@import","path":"../calculator.alp"}
{"kind":"@import","path":"../weather_forecast.alp"}
{"kind":"@import","path":"text_processor.alp"}
{"kind":"@shape","id":"OrchestratorInput","fields":{"app":"str","input_data":"str"}}
{"kind":"@shape","id":"OrchestratorResult","fields":{"app":"str","result":"str","error?":"str"}}
{"kind":"@fn","id":"route_calculator","in":{"expr":"str"},"out":"CalcResult","@op":[["calc_eval",{"expr":"$expr"},{"as":"result"}]],"@expect":{"value":"$result.value","expr":"$expr"}}
{"kind":"@fn","id":"route_weather","in":{"location":"str"},"out":{"weather":"str"},"@const":{"message":"Weather requires ALP_HTTP_ALLOWLIST=api.open-meteo.com"},"@expect":{"weather":"$message"}}
{"kind":"@fn","id":"route_text","in":{"text":"str"},"out":"TextResult","@op":[["process_text",{"text":"$text","operation":"analyze"},{"as":"result"}]],"@expect":"$result"}
{"kind":"@fn","id":"create_orchestrator","in":{},"out":{"launched":"bool"},"@op":[["ui_create",{"title":"ALP Program Orchestrator","description":"Run multiple ALP programs from one interface","theme":"soft"},{"as":"created"}],["ui_add_input",{"name":"app","type":"dropdown","label":"Select Application","options":["Calculator","Text Processor","Weather (needs permission)"],"default":"Calculator"},{"as":"app_select"}],["ui_add_input",{"name":"input_data","type":"textbox","label":"Input (expression for calc, text for processor, location for weather)","default":"(5 + 3) * 2"},{"as":"input"}],["ui_add_output",{"name":"result","type":"json","label":"Result"},{"as":"output"}],["ui_add_output",{"name":"permissions","type":"markdown","label":"Required Permissions"},{"as":"perms"}],["ui_launch",{"port":7865},{"as":"launched"}],["ui_wait",{},{"as":"waited"}]],"@expect":{"launched":"$launched.launched"}}
{"kind":"@flow","edges":[["create_orchestrator",null,{}]]}